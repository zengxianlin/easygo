<!DOCTYPE html>
<!-- saved from url=(0047)http://www.shifeng1993.com/admin/write-post.php -->
<html class="no-js" data-ember-extension="1"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <meta name="renderer" content="webkit">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>撰写新文章 - 师峰的个人博客 - Powered by Typecho</title>
        <meta name="robots" content="noindex, nofollow">
        <link rel="stylesheet" href="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/normalize.css">
<link rel="stylesheet" href="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/grid.css">
<link rel="stylesheet" href="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/style.css">
<!--[if lt IE 9]>
<script src="http://www.shifeng1993.com/admin/js/html5shiv.js?v=14.10.10"></script>
<script src="http://www.shifeng1993.com/admin/js/respond.js?v=14.10.10"></script>
<![endif]-->    <link type="text/css" rel="stylesheet" href="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/codemirror.min.css"><link type="text/css" rel="stylesheet" href="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/dialog.css"><link type="text/css" rel="stylesheet" href="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/matchesonscrollbar.css"><script id="http:-www-shifeng1993-com-usr-plugins-EditorMD-lib-codemirror-codemirror-min" type="text/javascript" src="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/codemirror.min.js"></script><script id="http:-www-shifeng1993-com-usr-plugins-EditorMD-lib-codemirror-modes-min" type="text/javascript" src="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/modes.min.js"></script><script id="http:-www-shifeng1993-com-usr-plugins-EditorMD-lib-codemirror-addons-min" type="text/javascript" src="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/addons.min.js"></script><script id="http:-www-shifeng1993-com-usr-plugins-EditorMD-lib-marked-min" type="text/javascript" src="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/marked.min.js"></script><script id="http:-www-shifeng1993-com-usr-plugins-EditorMD-lib-prettify-min" type="text/javascript" src="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/prettify.min.js"></script><script id="http:-www-shifeng1993-com-usr-plugins-EditorMD-lib-plugins-code-block-dialog-code-block-dialog" type="text/javascript" src="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/code-block-dialog.js"></script><script id="http:-www-shifeng1993-com-usr-plugins-EditorMD-lib-plugins-code-block-dialog-code-block-dialog" type="text/javascript" src="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/code-block-dialog.js"></script></head>
    <body style="position: static;">
    <!--[if lt IE 9]>
        <div class="message error browsehappy" role="dialog">当前网页 <strong>不支持</strong> 你正在使用的浏览器. 为了正常的访问, 请 <a href="http://browsehappy.com/">升级你的浏览器</a>.</div>
    <![endif]-->
<div class="typecho-head-nav clearfix" role="navigation">
    <nav id="typecho-nav-list">
        <ul class="root"><li class="parent"><a href="http://www.shifeng1993.com/admin/index.php">控制台</a></li><ul class="child"><li><a href="http://www.shifeng1993.com/admin/index.php">概要</a></li><li><a href="http://www.shifeng1993.com/admin/profile.php">个人设置</a></li><li><a href="http://www.shifeng1993.com/admin/plugins.php">插件</a></li><li class="last"><a href="http://www.shifeng1993.com/admin/themes.php">外观</a></li></ul></ul><ul class="root focus"><li class="parent"><a href="http://www.shifeng1993.com/admin/write-post.php">撰写</a></li><ul class="child"><li class="focus"><a href="http://www.shifeng1993.com/admin/write-post.php">撰写文章</a></li><li class="last"><a href="http://www.shifeng1993.com/admin/write-page.php">创建页面</a></li></ul></ul><ul class="root"><li class="parent"><a href="http://www.shifeng1993.com/admin/manage-posts.php">管理</a></li><ul class="child"><li><a href="http://www.shifeng1993.com/admin/manage-posts.php">文章</a></li><li><a href="http://www.shifeng1993.com/admin/manage-pages.php">独立页面</a></li><li><a href="http://www.shifeng1993.com/admin/manage-comments.php">评论</a></li><li><a href="http://www.shifeng1993.com/admin/manage-categories.php">分类</a></li><li><a href="http://www.shifeng1993.com/admin/manage-tags.php">标签</a></li><li><a href="http://www.shifeng1993.com/admin/manage-medias.php">文件</a></li><li class="last"><a href="http://www.shifeng1993.com/admin/manage-users.php">用户</a></li></ul></ul><ul class="root"><li class="parent"><a href="http://www.shifeng1993.com/admin/options-general.php">设置</a></li><ul class="child"><li><a href="http://www.shifeng1993.com/admin/options-general.php">基本</a></li><li><a href="http://www.shifeng1993.com/admin/options-discussion.php">评论</a></li><li><a href="http://www.shifeng1993.com/admin/options-reading.php">阅读</a></li><li class="last"><a href="http://www.shifeng1993.com/admin/options-permalink.php">永久链接</a></li></ul></ul>    </nav>
    <div class="operate">
                <a title="最后登录: 11月15日" href="http://www.shifeng1993.com/admin/profile.php" class="author">师峰</a><a class="exit" href="http://www.shifeng1993.com/index.php/action/logout">登出</a><a href="http://www.shifeng1993.com/" target="_blank">网站</a>
    </div>
</div>

<div class="main">
    <div class="body container">
        <div class="typecho-page-title">
    <h2>撰写新文章</h2>
</div>
        <div class="row typecho-page-main typecho-post-area" role="form">
            <form action="http://www.shifeng1993.com/index.php/action/contents-post-edit?_=41e90752e325df3758545e089678fbb8" method="post" name="write_post">
                <div class="col-mb-12 col-tb-9" role="main">
                    
                    <p class="title">
                        <label for="title" class="sr-only">标题</label>
                        <input type="text" id="title" name="title" autocomplete="off" value="" placeholder="标题" class="w-100 text title">
                    </p>
                                        <p class="mono url-slug">
                        <label for="slug" class="sr-only">网址缩略名</label>
                        www.shifeng1993.com/index.php/archives/{cid}/                    </p>
                    <p>
                        <label for="text" class="sr-only">文章内容</label>
                        <div id="text-editormd" class="editormd editormd-vertical" style="width: 100%; height: 640px;"><textarea style="height: 363px; display: none;" autocomplete="off" id="text" name="text" class="w-100 mono editormd-markdown-textarea" placeholder="Enjoy Markdown! coding now...">##  介绍
 这是一个easygo的虚拟售货机demo，包括了vue和vuex的基本用法，以及nodejs辅助前端进行跨域，node跨域代理转发请求等基础用法，由于目前就只有一台机器，所有没有做路由，后面如果有机器，添加路由和组件即可。
使用
### 安装依赖

```bash
npm install
```

### 启动vue开发服务
```bash
npm run dev
```

### 启动node后台服务
```bash
cd server
node app
```
### 测试
没有写。。只能凑合看把。

### 端口
前端在`localhost:8080`

后端端口转发在`localhost:3333`</textarea><div class="CodeMirror cm-s-default CodeMirror-wrap CodeMirror-focused" style="font-size: 13px; width: 426px; margin-top: 77px; height: 564px;"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 373px; left: 64px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; padding: 0px; width: 1000px; height: 1em; outline: none;" tabindex="0"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px; display: block;"><div style="min-width: 1px; height: 679px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 23px; margin-bottom: -7px; border-right-width: 23px; min-height: 646px; padding-right: 7px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>20</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style=""><div class="CodeMirror-cursor" style="left: 41px; top: 484px; height: 22px;">&nbsp;</div></div><div class="CodeMirror-code"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">1</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-header cm-header-2">##  介绍</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">2</div></div><pre class=""><span style="padding-right: 0.1px;"> 这是一个easygo的虚拟售货机demo，包括了vue和vuex的基本用法，以及nodejs辅助前端进行跨域，node跨域代理转发请求等基础用法，由于目前就只有一台机器，所有没有做路由，后面如果有机器，添加路由和组件即可。</span></pre></div><div class="" style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">3</div></div><pre class=""><span style="padding-right: 0.1px;">使用</span></pre></div><div class="" style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">4</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-header cm-header-3">### 安装依赖</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">5</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">6</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">```bash</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">7</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-builtin">npm</span> install</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">8</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">```</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">9</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div class="" style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">10</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-header cm-header-3">### 启动vue开发服务</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">11</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">```bash</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">12</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-builtin">npm</span> run dev</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">13</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">```</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">14</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div class="" style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">15</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-header cm-header-3">### 启动node后台服务</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">16</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">```bash</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">17</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-builtin">cd</span> server</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">18</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-builtin">node</span> app</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">19</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">```</span></span></pre></div><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">20</div></div><pre><span style="padding-right: 0.1px;"><span class="cm-header cm-header-3">### 测试</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">21</div></div><pre class=""><span style="padding-right: 0.1px;">没有写。。只能凑合看把。</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">22</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div class="" style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">23</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-header cm-header-3">### 端口</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">24</div></div><pre class=""><span style="padding-right: 0.1px;">前端在<span class="cm-comment">`localhost:8080`</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">25</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -23px; width: 23px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">26</div></div><pre class=""><span style="padding-right: 0.1px;">后端端口转发在<span class="cm-comment">`localhost:3333`</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 23px; width: 1px; top: 646px;"></div><div class="CodeMirror-gutters" style="height: 669px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 22px;"></div><div class="CodeMirror-gutter CodeMirror-foldgutter"></div></div></div></div><a href="javascript:;" class="fa fa-close editormd-preview-close-btn"></a>

<div class="editormd-preview" style="display: block; width: 425px; top: 77px; height: 564px;"><div class="markdown-body editormd-preview-container" style="padding: 20px;"><h2 id="h2-u4ECBu7ECD"><a name="介绍" class="reference-link"></a><span class="header-link octicon octicon-link"></span>介绍</h2><p> 这是一个easygo的虚拟售货机demo，包括了vue和vuex的基本用法，以及nodejs辅助前端进行跨域，node跨域代理转发请求等基础用法，由于目前就只有一台机器，所有没有做路由，后面如果有机器，添加路由和组件即可。<br>使用</p>
<h3 id="h3-u5B89u88C5u4F9Du8D56"><a name="安装依赖" class="reference-link"></a><span class="header-link octicon octicon-link"></span>安装依赖</h3><pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="lang-bash"><span class="pln">npm install</span></code></li></ol></pre>
<h3 id="h3--vue-"><a name="启动vue开发服务" class="reference-link"></a><span class="header-link octicon octicon-link"></span>启动vue开发服务</h3><pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="lang-bash"><span class="pln">npm run dev</span></code></li></ol></pre>
<h3 id="h3--node-"><a name="启动node后台服务" class="reference-link"></a><span class="header-link octicon octicon-link"></span>启动node后台服务</h3><pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="lang-bash"><span class="pln">cd server</span></code></li><li class="L1"><code class="lang-bash"><span class="pln">node app</span></code></li></ol></pre>
<h3 id="h3-u6D4Bu8BD5"><a name="测试" class="reference-link"></a><span class="header-link octicon octicon-link"></span>测试</h3><p>没有写。。只能凑合看把。</p>
<h3 id="h3-u7AEFu53E3"><a name="端口" class="reference-link"></a><span class="header-link octicon octicon-link"></span>端口</h3><p>前端在<code>localhost:8080</code></p>
<p>后端端口转发在<code>localhost:3333</code></p>
</div></div>
<div class="editormd-container-mask" style="display: none;"></div>
<div class="editormd-mask" style="background-color: rgb(255, 255, 255); opacity: 0.1; z-index: 99998; display: none;"></div><div class="editormd-toolbar" style="display: block;"><div class="editormd-toolbar-container"><ul class="editormd-menu"><li><a href="javascript:;" title="撤销（Ctrl+Z）" unselectable="on"><i class="fa fa-undo" name="undo" unselectable="on"></i></a></li><li><a href="javascript:;" title="重做（Ctrl+Y）" unselectable="on"><i class="fa fa-repeat" name="redo" unselectable="on"></i></a></li><li class="divider" unselectable="on">|</li><li><a href="javascript:;" title="粗体" unselectable="on"><i class="fa fa-bold" name="bold" unselectable="on"></i></a></li><li><a href="javascript:;" title="删除线" unselectable="on"><i class="fa fa-strikethrough" name="del" unselectable="on"></i></a></li><li><a href="javascript:;" title="斜体" unselectable="on"><i class="fa fa-italic" name="italic" unselectable="on"></i></a></li><li><a href="javascript:;" title="引用" unselectable="on"><i class="fa fa-quote-left" name="quote" unselectable="on"></i></a></li><li><a href="javascript:;" title="标题1" unselectable="on"><i class="fa editormd-bold" name="h1" unselectable="on">H1</i></a></li><li><a href="javascript:;" title="标题2" unselectable="on"><i class="fa editormd-bold" name="h2" unselectable="on">H2</i></a></li><li><a href="javascript:;" title="标题3" unselectable="on"><i class="fa editormd-bold" name="h3" unselectable="on">H3</i></a></li><li><a href="javascript:;" title="标题4" unselectable="on"><i class="fa editormd-bold" name="h4" unselectable="on">H4</i></a></li><li class="divider" unselectable="on">|</li><li><a href="javascript:;" title="无序列表" unselectable="on"><i class="fa fa-list-ul" name="list-ul" unselectable="on"></i></a></li><li><a href="javascript:;" title="有序列表" unselectable="on"><i class="fa fa-list-ol" name="list-ol" unselectable="on"></i></a></li><li><a href="javascript:;" title="横线" unselectable="on"><i class="fa fa-minus" name="hr" unselectable="on"></i></a></li><li class="divider" unselectable="on">|</li><li><a href="javascript:;" title="链接" unselectable="on"><i class="fa fa-link" name="link" unselectable="on"></i></a></li><li><a href="javascript:;" title="引用链接" unselectable="on"><i class="fa fa-anchor" name="reference-link" unselectable="on"></i></a></li><li><a href="javascript:;" title="添加图片" unselectable="on"><i class="fa fa-picture-o" name="image" unselectable="on"></i></a></li><li><a href="javascript:;" title="行内代码" unselectable="on"><i class="fa fa-code" name="code" unselectable="on"></i></a></li><li><a href="javascript:;" title="预格式文本 / 代码块（缩进风格）" unselectable="on"><i class="fa fa-file-code-o" name="preformatted-text" unselectable="on"></i></a></li><li><a href="javascript:;" title="代码块（多语言风格）" unselectable="on"><i class="fa fa-file-code-o" name="code-block" unselectable="on"></i></a></li><li><a href="javascript:;" title="添加表格" unselectable="on"><i class="fa fa-table" name="table" unselectable="on"></i></a></li><li><a href="javascript:;" title="日期时间" unselectable="on"><i class="fa fa-clock-o" name="datetime" unselectable="on"></i></a></li><li><a href="javascript:;" title="Emoji表情" unselectable="on"><i class="fa fa-smile-o" name="emoji" unselectable="on"></i></a></li><li><a href="javascript:;" title="HTML实体字符" unselectable="on"><i class="fa fa-copyright" name="html-entities" unselectable="on"></i></a></li><li><a href="javascript:;" title="插入摘要分隔符" unselectable="on"><i class="fa fa-newspaper-o" name="more" unselectable="on"></i></a></li><li class="divider" unselectable="on">|</li><li><a href="javascript:;" title="跳转到行" unselectable="on"><i class="fa fa-terminal" name="goto-line" unselectable="on"></i></a></li><li><a href="javascript:;" title="关闭实时预览" unselectable="on"><i class="fa fa-eye-slash" name="watch" unselectable="on"></i></a></li><li><a href="javascript:;" title="全窗口预览HTML（按 Shift + ESC还原）" unselectable="on"><i class="fa fa-desktop" name="preview" unselectable="on"></i></a></li><li><a href="javascript:;" title="全屏（按ESC还原）" unselectable="on"><i class="fa fa-arrows-alt" name="fullscreen" unselectable="on"></i></a></li><li><a href="javascript:;" title="清空" unselectable="on"><i class="fa fa-eraser" name="clear" unselectable="on"></i></a></li><li class="divider" unselectable="on">|</li><li><a href="javascript:;" title="使用帮助" unselectable="on"><i class="fa fa-question-circle" name="help" unselectable="on"></i></a></li><li><a href="javascript:;" title="关于Editor.md" unselectable="on"><i class="fa fa-info-circle" name="info" unselectable="on"></i></a></li><li class="divider" unselectable="on">|</li><li><a href="javascript:;" title="非Markdown模式" unselectable="on"><i class="fa fa-power-off fun" name="isMarkdown" unselectable="on"></i></a></li></ul></div></div><div class="editormd-dialog editormd-code-block-dialog" style="display: none; z-index: 99999; width: 780px; height: 565px; top: 33.5px; left: 240.5px;"><div class="editormd-dialog-header" style="cursor: move;"><strong class="editormd-dialog-title">添加代码块</strong></div><a href="javascript:;" class="fa fa-close editormd-dialog-close"></a><div class="editormd-dialog-container"><div class="editormd-code-toolbar">代码语言：<select><option selected="selected" value="">请选择代码语言</option><option value="asp" mode="vbscript">ASP</option><option value="actionscript" mode="clike">ActionScript(3.0)/Flash/Flex</option><option value="bash" mode="shell">Bash/Bat</option><option value="css" mode="css">CSS</option><option value="c" mode="clike">C</option><option value="cpp" mode="clike">C++</option><option value="csharp" mode="clike">C#</option><option value="coffeescript" mode="coffeescript">CoffeeScript</option><option value="d" mode="d">D</option><option value="dart" mode="dart">Dart</option><option value="delphi" mode="pascal">Delphi/Pascal</option><option value="erlang" mode="erlang">Erlang</option><option value="go" mode="go">Golang</option><option value="groovy" mode="groovy">Groovy</option><option value="html" mode="text/html">HTML</option><option value="java" mode="clike">Java</option><option value="json" mode="text/json">JSON</option><option value="javascript" mode="javascript">Javascript</option><option value="lua" mode="lua">Lua</option><option value="less" mode="css">LESS</option><option value="markdown" mode="gfm">Markdown</option><option value="objective-c" mode="clike">Objective-C</option><option value="php" mode="php">PHP</option><option value="perl" mode="perl">Perl</option><option value="python" mode="python">Python</option><option value="r" mode="r">R</option><option value="rst" mode="rst">reStructedText</option><option value="ruby" mode="ruby">Ruby</option><option value="sql" mode="sql">SQL</option><option value="sass" mode="sass">SASS/SCSS</option><option value="shell" mode="shell">Shell</option><option value="scala" mode="clike">Scala</option><option value="swift" mode="clike">Swift</option><option value="vb" mode="vb">VB/VBScript</option><option value="xml" mode="text/xml">XML</option><option value="yaml" mode="yaml">YAML</option><option value="other">其他语言</option></select></div><textarea placeholder="coding now...." style="display:none;"></textarea><div class="CodeMirror cm-s- CodeMirror-wrap" style="float: none; margin: 8px 0px; border: 1px solid rgb(221, 221, 221); font-size: 13px; width: 100%; height: 390px;"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 112.516px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; padding: 0px; width: 1000px; height: 1em; outline: none;" tabindex="0"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 21px; margin-bottom: -7px; border-right-width: 23px; min-height: 30px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style="visibility: hidden;"><div class="CodeMirror-cursor" style="left: 90.5156px; top: 0px; height: 22px;">&nbsp;</div></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-wrapper" style="left: -21px; width: 21px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 12px;">1</div></div><pre><span style="padding-right: 0.1px;"><span class="cm-builtin">npm</span> run dev</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 23px; width: 1px; top: 30px;"></div><div class="CodeMirror-gutters" style="height: 378px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 20px;"></div><div class="CodeMirror-gutter CodeMirror-foldgutter"></div></div></div></div><div class="editormd-dialog-footer"><button class="editormd-btn editormd-enter-btn">确定</button><button class="editormd-btn editormd-cancel-btn">取消</button></div></div><div class="editormd-dialog-mask editormd-dialog-mask-bg"></div><div class="editormd-dialog-mask editormd-dialog-mask-con"></div></div></div><span class="resize"><i></i></span>
                    </p>
                    
                                        <section id="custom-field" class="typecho-post-option fold">
                        <label id="custom-field-expand" class="typecho-label"><a href="http://www.shifeng1993.com/admin/write-post.php##"><i class="i-caret-right"></i> 自定义字段</a></label>
                        <table class="typecho-list-table mono">
                            <colgroup>
                                <col width="25%">
                                <col width="10%">
                                <col width="55%">
                                <col width="10%">
                            </colgroup>
                                                                                                                <tbody><tr>
                                <td>
                                    <label for="fieldname" class="sr-only">字段名称</label>
                                    <input type="text" name="fieldNames[]" placeholder="字段名称" id="fieldname" class="text-s w-100">
                                </td>
                                <td>
                                    <label for="fieldtype" class="sr-only">字段类型</label>
                                    <select name="fieldTypes[]" id="fieldtype">
                                        <option value="str">字符</option>
                                        <option value="int">整数</option>
                                        <option value="float">小数</option>
                                    </select>
                                </td>
                                <td>
                                    <label for="fieldvalue" class="sr-only">字段值</label>
                                    <textarea name="fieldValues[]" placeholder="字段值" id="fieldvalue" class="text-s w-100" rows="2"></textarea>
                                </td>
                                <td>
                                    <button type="button" class="btn btn-xs">删除</button>
                                </td>
                            </tr>
                                                    </tbody></table>
                        <div class="description clearfix">
                            <button type="button" class="btn btn-xs operate-add">+添加字段</button>
                            自定义字段可以扩展你的模板功能, 使用方法参见 <a href="http://docs.typecho.org/help/custom-fields" target="_blank">帮助文档</a>                        </div>
                    </section>

                    <p class="submit clearfix">
                        <span class="right">
                            <input type="hidden" name="cid" value="">
                            <button type="submit" name="do" value="save" id="btn-save" class="btn">保存草稿</button>
                            <button type="submit" name="do" value="publish" class="btn primary" id="btn-submit">发布文章</button>
                                                        <input type="hidden" name="markdown" value="1">
                                                    </span>
                    </p>

                                    </div>

                <div id="edit-secondary" class="col-mb-12 col-tb-3" role="complementary">
                    <ul class="typecho-option-tabs clearfix">
                        <li class="active w-50"><a href="http://www.shifeng1993.com/admin/write-post.php#tab-advance">选项</a></li>
                        <li class="w-50"><a href="http://www.shifeng1993.com/admin/write-post.php#tab-files" id="tab-files-btn">附件</a></li>
                    </ul>


                    <div id="tab-advance" class="tab-content">
                        <section class="typecho-post-option" role="application">
                            <label for="date" class="typecho-label">发布日期</label>
                            <p><input class="typecho-date w-100 hasDatepicker" type="text" name="date" id="date" value=""></p>
                        </section>

                        <section class="typecho-post-option category-option">
                            <label class="typecho-label">分类</label>
                                                        <ul>
                                                                                                <li><input type="checkbox" id="category-6" value="6" name="category[]">
                                <label for="category-6">前端</label></li>
                                                            </ul>
                        </section>

                        <section class="typecho-post-option">
                            <label for="token-input-tags" class="typecho-label">标签</label>
                            <p><ul class="token-input-list"><li class="token-input-input-token"><input type="text" autocomplete="off" id="token-input-tags" style="outline: none;"><tester style="position: absolute; top: -9999px; left: -9999px; width: auto; font-size: 14px; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-weight: 400; letter-spacing: 0px; white-space: nowrap;"></tester></li></ul><input id="tags" name="tags" type="text" value="" class="w-100 text" style="display: none;"></p>
                        </section>

                        
                        <button type="button" id="advance-panel-btn" class="btn btn-xs">高级选项 <i class="i-caret-down"></i></button>
                        <div id="advance-panel">
                                                        <section class="typecho-post-option visibility-option">
                                <label for="visibility" class="typecho-label">公开度</label>
                                <p>
                                <select id="visibility" name="visibility">
                                                                        <option value="publish" selected="">公开</option>
                                    <option value="hidden">隐藏</option>
                                    <option value="password">密码保护</option>
                                    <option value="private">私密</option>
                                                                        <option value="waiting">待审核</option>
                                </select>
                                </p>
                                <p id="post-password" class="hidden">
                                    <label for="protect-pwd" class="sr-only">内容密码</label>
                                    <input type="text" name="password" id="protect-pwd" class="text-s" value="" size="16" placeholder="内容密码">
                                </p>
                            </section>
                            
                            <section class="typecho-post-option allow-option">
                                <label class="typecho-label">权限控制</label>
                                <ul>
                                    <li><input id="allowComment" name="allowComment" type="checkbox" value="1" checked="true">
                                    <label for="allowComment">允许评论</label></li>
                                    <li><input id="allowPing" name="allowPing" type="checkbox" value="1" checked="true">
                                    <label for="allowPing">允许被引用</label></li>
                                    <li><input id="allowFeed" name="allowFeed" type="checkbox" value="1" checked="true">
                                    <label for="allowFeed">允许在聚合中出现</label></li>
                                </ul>
                            </section>
                            
                            <section class="typecho-post-option">
                                <label for="trackback" class="typecho-label">引用通告</label>
                                <p><textarea id="trackback" class="w-100 mono" name="trackback" rows="2"></textarea></p>
                                <p class="description">每一行一个引用地址, 用回车隔开</p>
                            </section>

                                                    </div><!-- end #advance-panel -->

                                            </div><!-- end #tab-advance -->

                    <div id="tab-files" class="tab-content hidden">
                        

<div id="upload-panel" class="p">
    <div class="upload-area" draggable="true">拖放文件到这里<br>或者 <a href="http://www.shifeng1993.com/admin/write-post.php###" class="upload-file">选择文件上传</a></div>
    <ul id="file-list">
        </ul>
</div>

                    </div><!-- end #tab-files -->
                </div>
            </form>
        </div>
    </div>
</div>

<div class="typecho-foot" role="contentinfo">
    <div class="copyright">
        <a href="http://typecho.org/" class="i-logo-s" target="_blank">Typecho</a>
        <p>由 <a href="http://typecho.org/" target="_blank">Typecho</a> 强力驱动, 版本 1.0 (14.10.10)</p>
    </div>
    <nav class="resource">
        <a href="http://docs.typecho.org/" target="_blank">帮助文档</a> •
        <a href="http://forum.typecho.org/" target="_blank">支持论坛</a> •
        <a href="https://github.com/typecho/typecho/issues" target="_blank">报告错误</a> •
        <a href="http://extends.typecho.org/" target="_blank">资源下载</a>
    </nav>
</div>
<script src="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/jquery.js"></script>
<script src="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/jquery-ui.js"></script>
<script src="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/typecho.js"></script>
<script>
    (function () {
        $(document).ready(function() {
            // 处理消息机制
            (function () {
                var prefix = '85cbe19b903f8af4ac5d585852b6899d',
                    cookies = {
                        notice      :   $.cookie(prefix + '__typecho_notice'),
                        noticeType  :   $.cookie(prefix + '__typecho_notice_type'),
                        highlight   :   $.cookie(prefix + '__typecho_notice_highlight')
                    },
                    path = '/';

                if (!!cookies.notice && 'success|notice|error'.indexOf(cookies.noticeType) >= 0) {
                    var head = $('.typecho-head-nav'),
                        p = $('<div class="message popup ' + cookies.noticeType + '">'
                        + '<ul><li>' + $.parseJSON(cookies.notice).join('</li><li>') 
                        + '</li></ul></div>'), offset = 0;

                    if (head.length > 0) {
                        p.insertAfter(head);
                        offset = head.outerHeight();
                    } else {
                        p.prependTo(document.body);
                    }

                    function checkScroll () {
                        if ($(window).scrollTop() >= offset) {
                            p.css({
                                'position'  :   'fixed',
                                'top'       :   0
                            });
                        } else {
                            p.css({
                                'position'  :   'absolute',
                                'top'       :   offset
                            });
                        }
                    }

                    $(window).scroll(function () {
                        checkScroll();
                    });

                    checkScroll();

                    p.slideDown(function () {
                        var t = $(this), color = '#C6D880';
                        
                        if (t.hasClass('error')) {
                            color = '#FBC2C4';
                        } else if (t.hasClass('notice')) {
                            color = '#FFD324';
                        }

                        t.effect('highlight', {color : color})
                            .delay(5000).slideUp(function () {
                            $(this).remove();
                        });
                    });

                    
                    $.cookie(prefix + '__typecho_notice', null, {path : path});
                    $.cookie(prefix + '__typecho_notice_type', null, {path : path});
                }

                if (cookies.highlight) {
                    $('#' + cookies.highlight).effect('highlight', 1000);
                    $.cookie(prefix + '__typecho_notice_highlight', null, {path : path});
                }
            })();


            // 导航菜单 tab 聚焦时展开下拉菜单
            (function () {
                $('#typecho-nav-list').find('.parent a').focus(function() {
                    $('#typecho-nav-list').find('.child').hide();
                    $(this).parents('.root').find('.child').show();
                });
                $('.operate').find('a').focus(function() {
                    $('#typecho-nav-list').find('.child').hide();
                });
            })();


            if ($('.typecho-login').length == 0) {
                $('a').each(function () {
                    var t = $(this), href = t.attr('href');

                    if ((href && href[0] == '#')
                        || /^http\:\/\/www\.shifeng1993\.com\/admin\/.*$/.exec(href) 
                            || /^http\:\/\/www\.shifeng1993\.com\/index\.php\/action\/[_a-zA-Z0-9\/]+.*$/.exec(href)) {
                        return;
                    }

                    t.attr('target', '_blank');
                });
            }
        });
    })();
</script>
<script>
(function () {
    $(document).ready(function () {
        var error = $('.typecho-option .error:first');

        if (error.length > 0) {
            $('html,body').scrollTop(error.parents('.typecho-option').offset().top);
        }

        $('form').submit(function () {
            if (this.submitted) {
                return false;
            } else {
                this.submitted = true;
            }
        });

        $('label input[type=text]').click(function (e) {
            var check = $('#' + $(this).parents('label').attr('for'));
            check.prop('checked', true);
            return false;
        });
    });
})();
</script>

<script src="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/timepicker.js"></script>
<script src="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/tokeninput.js"></script>
<script>
$(document).ready(function() {
    // 日期时间控件
    $('#date').mask('9999-99-99 99:99').datetimepicker({
        currentText     :   '现在',
        prevText        :   '上一月',
        nextText        :   '下一月',
        monthNames      :   ['一月', '二月', '三月', '四月',
            '五月', '六月', '七月', '八月',
            '九月', '十月', '十一月', '十二月'],
        dayNames        :   ['星期日', '星期一', '星期二',
            '星期三', '星期四', '星期五', '星期六'],
        dayNamesShort   :   ['周日', '周一', '周二', '周三',
            '周四', '周五', '周六'],
        dayNamesMin     :   ['日', '一', '二', '三',
            '四', '五', '六'],
        closeText       :   '完成',
        timeOnlyTitle   :   '选择时间',
        timeText        :   '时间',
        hourText        :   '时',
        amNames         :   ['上午', 'A'],
        pmNames         :   ['下午', 'P'],
        minuteText      :   '分',
        secondText      :   '秒',

        dateFormat      :   'yy-mm-dd',
        hour            :   (new Date()).getHours(),
        minute          :   (new Date()).getMinutes()
    });

    // 聚焦
    $('#title').select();

    // text 自动拉伸
    Typecho.editorResize('text', 'http://www.shifeng1993.com/index.php/action/ajax?do=editorResize&_=41e90752e325df3758545e089678fbb8');

    // tag autocomplete 提示
    var tags = $('#tags'), tagsPre = [];
    
    if (tags.length > 0) {
        var items = tags.val().split(','), result = [];
        for (var i = 0; i < items.length; i ++) {
            var tag = items[i];

            if (!tag) {
                continue;
            }

            tagsPre.push({
                id      :   tag,
                tags    :   tag
            });
        }

        tags.tokenInput([{"id":"\u9762\u8bd5\u9898","tags":"\u9762\u8bd5\u9898"},{"id":"\u524d\u7aef","tags":"\u524d\u7aef"},{"id":"vue","tags":"vue"},{"id":"vuex","tags":"vuex"},{"id":"helo","tags":"helo"}], {
            propertyToSearch:   'tags',
            tokenValue      :   'tags',
            searchDelay     :   0,
            preventDuplicates   :   true,
            animateDropdown :   false,
            hintText        :   '请输入标签名',
            noResultsText   :   '此标签不存在, 按回车创建',
            prePopulate     :   tagsPre,

            onResult        :   function (result, query) {
                if (!query) {
                    return result;
                }

                if (!result) {
                    result = [];
                }

                if (!result[0] || result[0]['id'] != query) {
                    result.unshift({
                        id      :   query,
                        tags    :   query
                    });
                }

                return result.slice(0, 5);
            }
        });

        // tag autocomplete 提示宽度设置
        $('#token-input-tags').focus(function() {
            var t = $('.token-input-dropdown'),
                offset = t.outerWidth() - t.width();
            t.width($('.token-input-list').outerWidth() - offset);
        });
    }

    // 缩略名自适应宽度
    var slug = $('#slug');

    if (slug.length > 0) {
        var wrap = $('<div />').css({
            'position'  :   'relative',
            'display'   :   'inline-block'
        }),
        justifySlug = $('<pre />').css({
            'display'   :   'block',
            'visibility':   'hidden',
            'height'    :   slug.height(),
            'padding'   :   '0 2px',
            'margin'    :   0
        }).insertAfter(slug.wrap(wrap).css({
            'left'      :   0,
            'top'       :   0,
            'minWidth'  :   '5px',
            'position'  :   'absolute',
            'width'     :   '100%'
        })), originalWidth = slug.width();

        function justifySlugWidth() {
            var val = slug.val();
            justifySlug.text(val.length > 0 ? val : '     ');
        }

        slug.bind('input propertychange', justifySlugWidth);
        justifySlugWidth();
    }

    // 原始的插入图片和文件
    Typecho.insertFileToEditor = function (file, url, isImage) {
        var textarea = $('#text'), sel = textarea.getSelection(),
            html = isImage ? '<img src="' + url + '" alt="' + file + '" />'
                : '<a href="' + url + '">' + file + '</a>',
            offset = (sel ? sel.start : 0) + html.length;

        textarea.replaceSelection(html);
        textarea.setSelection(offset, offset);
    };

    var submitted = false, form = $('form[name=write_post],form[name=write_page]').submit(function () {
        submitted = true;
    }), savedData = null;

    // 自动保存

    // 自动检测离开页
    var lastData = form.serialize();

    $(window).bind('beforeunload', function () {
        if (!!savedData) {
            lastData = savedData;
        }

        if (form.serialize() != lastData && !submitted) {
            return '内容已经改变尚未保存, 您确认要离开此页面吗?';
        }
    });

    // 控制选项和附件的切换
    var fileUploadInit = false;
    $('#edit-secondary .typecho-option-tabs li').click(function() {
        $('#edit-secondary .typecho-option-tabs li').removeClass('active');
        $(this).addClass('active');
        $('.tab-content').addClass('hidden');
        
        var selected_tab = $(this).find('a').attr('href'),
            selected_el = $(selected_tab).removeClass('hidden');

        if (!fileUploadInit) {
            selected_el.trigger('init');
            fileUploadInit = true;
        }

        return false;
    });

    // 高级选项控制
    $('#advance-panel-btn').click(function() {
        $('#advance-panel').toggle();
        return false;
    });

    // 自动隐藏密码框
    $('#visibility').change(function () {
        var val = $(this).val(), password = $('#post-password');
        console.log(val);

        if ('password' == val) {
            password.removeClass('hidden');
        } else {
            password.addClass('hidden');
        }
    });
    
    // 草稿删除确认
    $('.edit-draft-notice a').click(function () {
        if (confirm('您确认要删除这份草稿吗?')) {
            window.location.href = $(this).attr('href');
        }

        return false;
    });
});
</script>

        <link rel="stylesheet" href="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/editormd.css">
        <script>
            var emojiPath = 'http://www.shifeng1993.com/usr/plugins';
        </script>
        <script type="text/javascript" src="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/editormd.js"></script>
        <script>
            $(document).ready(function() {

                var textarea = $('#text').parent("p");
                var isMarkdown = $('[name=markdown]').val()?1:0;
                if (!isMarkdown) {
                    var notice = $('<div class="message notice">本文Markdown解析已禁用！ '
                        + '<button class="btn btn-xs primary yes">启用</button> '
                        + '<button class="btn btn-xs no">保持禁用</button></div>')
                        .hide().insertBefore(textarea).slideDown();

                    $('.yes', notice).click(function () {
                        notice.remove();
                        $('<input type="hidden" name="markdown" value="1" />').appendTo('.submit');
                    });

                    $('.no', notice).click(function () {
                        notice.remove();
                    });
                }
                    $('#text').wrap("<div id='text-editormd'></div>");
                    postEditormd = editormd("text-editormd", {
                        width: "100%",
                        height: 640,
                        path: 'http://www.shifeng1993.com/usr/plugins/EditorMD/lib/',
                        toolbarAutoFixed: false,
                        htmlDecode: true,
                        emoji: true,
                        tex: false,
                        toc: false,
                        tocm: false,    // Using [TOCM]
                        taskList: false,
                        flowChart: false,  // 默认不解析
                        sequenceDiagram: false,
                        toolbarIcons: function () {
                            return ["undo", "redo", "|", "bold", "del", "italic", "quote", "h1", "h2", "h3", "h4", "|", "list-ul", "list-ol", "hr", "|", "link", "reference-link", "image", "code", "preformatted-text", "code-block", "table", "datetime", "emoji", "html-entities", "more", "|", "goto-line", "watch", "preview", "fullscreen", "clear", "|", "help", "info", "|", "isMarkdown"]
                        },
                        toolbarIconsClass: {
                            more: "fa-newspaper-o",  // 指定一个FontAawsome的图标类
                            isMarkdown: "fa-power-off fun"
                        },
                        // 自定义工具栏按钮的事件处理
                        toolbarHandlers: {
                            /**
                             * @param {Object}      cm         CodeMirror对象
                             * @param {Object}      icon       图标按钮jQuery元素对象
                             * @param {Object}      cursor     CodeMirror的光标对象，可获取光标所在行和位置
                             * @param {String}      selection  编辑器选中的文本
                             */
                            more: function (cm, icon, cursor, selection) {
                                cm.replaceSelection("<!--more-->");
                            },
                            isMarkdown: function (cm, icon, cursor, selection) {
                                if(!$("div.message.notice").html()){
                                var isMarkdown = $('[name=markdown]').val()?1:0;
                                if (isMarkdown) {
                                    var notice = $('<div class="message notice">本文Markdown解析已启用！ '
                                        + '<button class="btn btn-xs no">禁用</button> '
                                        + '<button class="btn btn-xs primary yes">保持启用</button></div>')
                                        .hide().insertBefore(textarea).slideDown();

                                    $('.yes', notice).click(function () {
                                        notice.remove();
                                    });

                                    $('.no', notice).click(function () {
                                        notice.remove();
                                        $("[name=markdown]").val(0);
                                    });
                                } else {
                                    var notice = $('<div class="message notice">本文Markdown解析已禁用！ '
                                        + '<button class="btn btn-xs primary yes">启用</button> '
                                        + '<button class="btn btn-xs no">保持禁用</button></div>')
                                        .hide().insertBefore(textarea).slideDown();

                                    $('.yes', notice).click(function () {
                                        notice.remove();
                                        if(!$("[name=markdown]").val())
                                            $('<input type="hidden" name="markdown" value="1" />').appendTo('.submit');
                                        else
                                            $("[name=markdown]").val(1);
                                    });

                                    $('.no', notice).click(function () {
                                        notice.remove();
                                    });
                                }
                            }
                            }
                        },
                        lang: {
                            toolbar: {
                                more: "插入摘要分隔符",
                                isMarkdown: "非Markdown模式"
                            }
                        },
                    });

                    // 优化图片及文件附件插入 Thanks to Markxuxiao
                    Typecho.insertFileToEditor = function (file, url, isImage) {
                        html = isImage ? '![' + file + '](' + url + ')'
                            : '[' + file + '](' + url + ')';
                        postEditormd.insertValue(html);
                    };

            });
        </script>
        
<script src="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/moxie.js"></script>
<script src="./撰写新文章 - 师峰的个人博客 - Powered by Typecho_files/plupload.js"></script>
<script>
$(document).ready(function() {
    function updateAttacmentNumber () {
        var btn = $('#tab-files-btn'),
            balloon = $('.balloon', btn),
            count = $('#file-list li .insert').length;

        if (count > 0) {
            if (!balloon.length) {
                btn.html($.trim(btn.html()) + ' ');
                balloon = $('<span class="balloon"></span>').appendTo(btn);
            }

            balloon.html(count);
        } else if (0 == count && balloon.length > 0) {
            balloon.remove();
        }
    }

    $('.upload-area').bind({
        dragenter   :   function () {
            $(this).parent().addClass('drag');
        },

        dragover    :   function (e) {
            $(this).parent().addClass('drag');
        },

        drop        :   function () {
            $(this).parent().removeClass('drag');
        },
        
        dragend     :   function () {
            $(this).parent().removeClass('drag');
        },

        dragleave   :   function () {
            $(this).parent().removeClass('drag');
        }
    });

    updateAttacmentNumber();

    function fileUploadStart (file) {
        $('<li id="' + file.id + '" class="loading">'
            + file.name + '</li>').appendTo('#file-list');
    }

    function fileUploadError (error) {
        var file = error.file, code = error.code, word; 
        
        switch (code) {
            case plupload.FILE_SIZE_ERROR:
                word = '文件大小超过限制';
                break;
            case plupload.FILE_EXTENSION_ERROR:
                word = '文件扩展名不被支持';
                break;
            case plupload.FILE_DUPLICATE_ERROR:
                word = '文件已经上传过';
                break;
            case plupload.HTTP_ERROR:
            default:
                word = '上传出现错误';
                break;
        }

        var fileError = '%s 上传失败'.replace('%s', file.name),
            li, exist = $('#' + file.id);

        if (exist.length > 0) {
            li = exist.removeClass('loading').html(fileError);
        } else {
            li = $('<li>' + fileError + '<br />' + word + '</li>').appendTo('#file-list');
        }

        li.effect('highlight', {color : '#FBC2C4'}, 2000, function () {
            $(this).remove();
        });
    }

    var completeFile = null;
    function fileUploadComplete (id, url, data) {
        var li = $('#' + id).removeClass('loading').data('cid', data.cid)
            .data('url', data.url)
            .data('image', data.isImage)
            .html('<input type="hidden" name="attachment[]" value="' + data.cid + '" />'
                + '<a class="insert" target="_blank" href="###" title="点击插入文件">' + data.title + '</a><div class="info">' + data.bytes
                + ' <a class="file" target="_blank" href="http://www.shifeng1993.com/admin/media.php?cid=' 
                + data.cid + '" title="编辑"><i class="i-edit"></i></a>'
                + ' <a class="delete" href="###" title="删除"><i class="i-delete"></i></a></div>')
            .effect('highlight', 1000);
            
        attachInsertEvent(li);
        attachDeleteEvent(li);
        updateAttacmentNumber();

        if (!completeFile) {
            completeFile = data;
        }
    }

    $('#tab-files').bind('init', function () {
        var uploader = new plupload.Uploader({
            browse_button   :   $('.upload-file').get(0),
            url             :   'http://www.shifeng1993.com/index.php/action/upload?_=41e90752e325df3758545e089678fbb8',
            runtimes        :   'html5,flash,html4',
            flash_swf_url   :   'http://www.shifeng1993.com/admin/js/Moxie.swf',
            drop_element    :   $('.upload-area').get(0),
            filters         :   {
                max_file_size       :   '2mb',
                mime_types          :   [{'title' : '允许上传的文件', 'extensions' : 'gif,jpg,jpeg,png,tiff,bmp'}],
                prevent_duplicates  :   true
            },

            init            :   {
                FilesAdded      :   function (up, files) {
                    plupload.each(files, function(file) {
                        fileUploadStart(file);
                    });

                    completeFile = null;
                    uploader.start();
                },

                UploadComplete  :   function () {
                    if (completeFile) {
                        Typecho.uploadComplete(completeFile);
                    }
                },

                FileUploaded    :   function (up, file, result) {
                    if (200 == result.status) {
                        var data = $.parseJSON(result.response);

                        if (data) {
                            fileUploadComplete(file.id, data[0], data[1]);
                            return;
                        }
                    }

                    fileUploadError({
                        code : plupload.HTTP_ERROR,
                        file : file
                    });
                },

                Error           :   function (up, error) {
                    fileUploadError(error);
                }
            }
        });

        uploader.init();
    });

    function attachInsertEvent (el) {
        $('.insert', el).click(function () {
            var t = $(this), p = t.parents('li');
            Typecho.insertFileToEditor(t.text(), p.data('url'), p.data('image'));
            return false;
        });
    }

    function attachDeleteEvent (el) {
        var file = $('a.insert', el).text();
        $('.delete', el).click(function () {
            if (confirm('确认要删除文件 %s 吗?'.replace('%s', file))) {
                var cid = $(this).parents('li').data('cid');
                $.post('http://www.shifeng1993.com/index.php/action/contents-attachment-edit?_=41e90752e325df3758545e089678fbb8',
                    {'do' : 'delete', 'cid' : cid},
                    function () {
                        $(el).fadeOut(function () {
                            $(this).remove();
                            updateAttacmentNumber();
                        });
                    });
            }

            return false;
        });
    }

    $('#file-list li').each(function () {
        attachInsertEvent(this);
        attachDeleteEvent(this);
    });
});
</script>

<script>
$(document).ready(function () {
    // 自定义字段
    $('#custom-field-expand').click(function() {
        var btn = $('i', this);
        if (btn.hasClass('i-caret-right')) {
            btn.removeClass('i-caret-right').addClass('i-caret-down');
        } else {
            btn.removeClass('i-caret-down').addClass('i-caret-right');
        }
        $(this).parent().toggleClass('fold');
        return false;
    });

    function attachDeleteEvent (el) {
        $('button.btn-xs', el).click(function () {
            if (confirm('确认要删除此字段吗?')) {
                $(this).parents('tr').fadeOut(function () {
                    $(this).remove();
                });
            }
        });
    }

    $('#custom-field table tbody tr').each(function () {
        attachDeleteEvent(this);
    });

    $('#custom-field button.operate-add').click(function () {
        var html = '<tr><td><input type="text" name="fieldNames[]" placeholder="字段名称" class="text-s w-100"></td>'
                + '<td><select name="fieldTypes[]" id="">'
                + '<option value="str">字符</option>'
                + '<option value="int">整数</option>'
                + '<option value="float">小数</option>'
                + '</select></td>'
                + '<td><textarea name="fieldValues[]" placeholder="字段值" class="text-s w-100" rows="2"></textarea></td>'
                + '<td><button type="button" class="btn btn-xs">删除</button></td></tr>',
            el = $(html).hide().appendTo('#custom-field table tbody').fadeIn();

        attachDeleteEvent(el);
    });
});
</script>
    

<div id="ui-datepicker-div" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div><div class="token-input-dropdown" style="display: none;"></div><div style="position: static; width: 0px; height: 0px; border: none; padding: 0px; margin: 0px;"><div id="trans-tooltip"><div id="tip-left-top" style="background: url(&quot;chrome-extension://ikkbfngojljohpekonpldkamedehakni/imgs/map/tip-left-top.png&quot;);"></div><div id="tip-top" style="background: url(&quot;chrome-extension://ikkbfngojljohpekonpldkamedehakni/imgs/map/tip-top.png&quot;) repeat-x;"></div><div id="tip-right-top" style="background: url(&quot;chrome-extension://ikkbfngojljohpekonpldkamedehakni/imgs/map/tip-right-top.png&quot;);"></div><div id="tip-right" style="background: url(&quot;chrome-extension://ikkbfngojljohpekonpldkamedehakni/imgs/map/tip-right.png&quot;) repeat-y;"></div><div id="tip-right-bottom" style="background: url(&quot;chrome-extension://ikkbfngojljohpekonpldkamedehakni/imgs/map/tip-right-bottom.png&quot;);"></div><div id="tip-bottom" style="background: url(&quot;chrome-extension://ikkbfngojljohpekonpldkamedehakni/imgs/map/tip-bottom.png&quot;) repeat-x;"></div><div id="tip-left-bottom" style="background: url(&quot;chrome-extension://ikkbfngojljohpekonpldkamedehakni/imgs/map/tip-left-bottom.png&quot;);"></div><div id="tip-left" style="background: url(&quot;chrome-extension://ikkbfngojljohpekonpldkamedehakni/imgs/map/tip-left.png&quot;);"></div><div id="trans-content"></div></div><div id="tip-arrow-bottom" style="background: url(&quot;chrome-extension://ikkbfngojljohpekonpldkamedehakni/imgs/map/tip-arrow-bottom.png&quot;);"></div><div id="tip-arrow-top" style="background: url(&quot;chrome-extension://ikkbfngojljohpekonpldkamedehakni/imgs/map/tip-arrow-top.png&quot;);"></div></div></body></html>